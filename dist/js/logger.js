"use strict";$("#feedback-btn").click(function(){$("#feedback-modal").modal("show")}),$("#bug-affected-pages").val(window.location.href),$("#issueType").change(function(){let e=$(this).val();$(".feedback-section:not(.feedback-"+e+")").collapse("hide"),$(".feedback-"+e).collapse("show"),$(".feedback-hide.feedback-"+e+"-hide").addClass("hidden"),$(".feedback-hide:not(.feedback-"+e+"-hide)").removeClass("hidden")});let getInfo=function(){return{userAgent:window.navigator.userAgent,browserByDuckTyping:window.chrome&&window.chrome.webstore?"chrome":"undefined"!=typeof InstallTrigger?"firefox":/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString()?"safari":window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?"opera":document.documentMode?"ie":!isIE&&window.StyleMedia?"edge":(isChrome||isOpera)&&window.CSS?"blink":"unknown",platform:window.navigator.platform,detectedOS:(e=window.navigator.userAgent,a=window.navigator.platform,i=null,-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a)?i="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(a)?i="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(a)?i="Windows":/Android/.test(e)?i="Android":!i&&/Linux/.test(a)&&(i="Linux"),i),navigator:function(){let e={};for(let a in navigator)e[a]=navigator[a];return delete e.plugins,delete e.mimeTypes,e}()};var e,a,i},bugFields=[{name:"title",validation:/^.{10,150}$/,maxLength:150,minLength:10},{name:"description",validation:/^.{0,5000}$/,maxLength:5e3,minLength:0},{name:"affected-pages",validation:/^.{0,500}$/,maxLength:500,minLength:0},{name:"name",validation:/^.{3,100}$/,general:!0},{name:"email",validation:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/,general:!0}];for(let e=0;e<bugFields.length;e++){let a=function(){let a=$("#"+(bugFields[e].general?"":"bug-")+bugFields[e].name).val(),i=a.length;if(bugFields[e].maxLength&&bugFields[e].minLength){let a=i>=bugFields[e].minLength;$("#"+(bugFields[e].general?"":"bug-")+bugFields[e].name+"-unit").text(a?" / "+bugFields[e].maxLength:" characters to go"),$("#"+(bugFields[e].general?"":"bug-")+bugFields[e].name+"-length").text(a?i:bugFields[e].minLength-i)}let n=bugFields[e].validation.test(a);n&&!0!==bugFields[e].wasValid?bugFields[e].wasValid=!0:n||!0!==bugFields[e].wasValid?$("#"+(bugFields[e].general?"":"bug-")+bugFields[e].name).hasClass("is-invalid")&&$("#"+(bugFields[e].general?"":"bug-")+bugFields[e].name).removeClass("is-invalid"):$("#"+(bugFields[e].general?"":"bug-")+bugFields[e].name).addClass("is-invalid")};$("#"+(bugFields[e].general?"":"bug-")+bugFields[e].name).on("change paste keyup",a),a()}let getExtensionFromFilename=function(e){return e.slice((Math.max(0,e.lastIndexOf("."))||1/0)+1)},upload=function(e){console.log("Size",e.size);var a={contentType:e.type},i=firebase.storage().ref().child("/feedback/bug/files/"+e.name).put(e,a);$("#upload-control").removeClass("hidden"),i.on(firebase.storage.TaskEvent.STATE_CHANGED,function(e){var a=e.bytesTransferred/e.totalBytes*100;switch(a=Math.round(100*a)/100,$("#feedback-progressbar").css("width",a+"%"),$("#feedback-progressbar").html(a+"%"),$("#feedback-progressbar").attr("aria-valuenow",a+"%"),e.state){case firebase.storage.TaskState.PAUSED:$("#upload-control-play").addClass("hidden"),$("#upload-control-resume").removeClass("hidden"),console.log("Upload is paused");break;case firebase.storage.TaskState.RUNNING:$("#upload-control-resume").addClass("hidden"),$("#upload-control-play").removeClass("hidden"),console.log("Upload is running")}},function(e){switch(e.code){case"storage/canceled":$("#feedback-modal .modal-body").addClass("hidden"),$("#feedback-cancelled").removeClass("hidden");break;case"storage/cannot-slice-blob":$("#feedback-modal .modal-body").addClass("hidden"),$("#feedback-filechangederror").removeClass("hidden");break;default:$("#feedback-error-data").html(btoa(JSON.stringify(e)))}},function(){i.snapshot.ref.getDownloadURL().then(function(e){console.log("File available at",e)}),$("#feedback-modal .modal-body").addClass("hidden"),$("#feedback-done").removeClass("hidden")})};$("#feedback-submit").click(function(){switch($(".uploading-hide").addClass("hidden"),$(".uploading-show").removeClass("hidden"),$("#issueType").val()){case"bug":!function(){let e=!1;for(let a=0;a<bugFields.length;a++){let i=!0===bugFields[a].general?$("#"+bugFields[a].name).val():$("#bug-"+bugFields[a].name).val();console.log(bugFields[a].general,bugFields[a].name,i),bugFields[a].validation.test(i)||(e=!0,$((bugFields[a].general?"#":"#bug-")+bugFields[a].name).addClass("is-invalid"))}var a=$("#bug-file")[0].files[0];a.size>105906176&&($("#bug-file").addClass("is-invalid"),$("#bug-file-group invalid-feedback").removeClass(""),e=!0),e||($("#feedback-main").addClass("hidden"),$("#feedback-loading").removeClass("hidden"),$("#feedback-progressbar").css("width","0%"),$("#feedback-progressbar").html("0%"),$("#feedback-progressbar").attr("aria-valuenow","0%"),upload(a))}()}}),$(".custom-file-input").on("change",function(){var e=$(this).val();e=e.substring(e.lastIndexOf("\\")+1),console.log(e),$("#bug-file").hasClass("is-invalid")&&$("#bug-file").removeClass("is-invalid"),$(this).next(".custom-file-label").css("white-space: nowrap;overflow:hidden;"),$(this).next(".custom-file-label").html(e)}),$("#bug-file-clear").click(function(){$("#bug-file").val(null),$("#bug-file").next(".custom-file-label").html("Choose File")});var Logger={log:function(){}};